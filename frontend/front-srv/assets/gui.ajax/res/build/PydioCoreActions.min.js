!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.PydioCoreActions=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.global.Notification?(alert(_globals.MessageHash["notification_center.12"]),_globals.global.Notification.requestPermission(function(grant){["default","granted","denied"].indexOf(grant)})):_globals.global.alert(_globals.MessageHash["notification_center.13"])},module.exports=exports.default},{"../globals":11}],2:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.UI.openComponentInModal("PydioCoreActions","PasswordDialog",{locked:_globals.pydio.user&&"pass_change"===_globals.pydio.user.lock})},module.exports=exports.default},{"../globals":11}],3:[function(require,module,exports){"use strict";exports.__esModule=!0;var PydioApi=require("pydio/http/api");exports.default=function(){PydioApi.getClient().request({get_action:"clear_plugins_cache"})},module.exports=exports.default},{"pydio/http/api":"pydio/http/api"}],4:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals"),PydioApi=require("pydio/http/api");exports.default=function(manager,args){var selection=args[0];if(selection.getUniqueNode&&(selection=selection.getUniqueNode()),selection&&selection.getMetadata&&selection.getMetadata().get("alert_id")){var elMeta=selection.getMetadata(),params={get_action:"dismiss_user_alert",alert_id:elMeta.get("alert_id")};elMeta.get("event_occurence")&&(params.occurrences=elMeta.get("event_occurence")),PydioApi.getClient().request(params,function(){_globals.pydio.notify("server_message:tree/reload_user_feed")})}},module.exports=exports.default},{"../globals":11,"pydio/http/api":"pydio/http/api"}],5:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals"),PydioApi=require("pydio/http/api");exports.default=function(){var crtDir=_globals.pydio.getContextHolder().getContextNode().getPath();_globals.pydio.getUserSelection().isEmpty()||(crtDir=_globals.pydio.getUserSelection().getUniqueNode().getPath()),PydioApi.getClient().request({get_action:"index",file:crtDir},function(transport){})},module.exports=exports.default},{"../globals":11,"pydio/http/api":"pydio/http/api"}],6:[function(require,module,exports){"use strict"},{}],7:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _globals=require("../globals"),_pydioHttpApi=require("pydio/http/api"),_pydioHttpApi2=_interopRequireDefault(_pydioHttpApi),_pydioHttpRestApi=require("pydio/http/rest-api");exports.default=function(){var selection=_globals.pydio.getContextHolder();if(!selection.isEmpty()&&selection.isUnique()){var node=selection.getUniqueNode(),isBookmarked="true"===node.getMetadata().get("bookmark"),nodeUuid=node.getMetadata().get("uuid"),userId=_globals.pydio.user.id,api=new _pydioHttpRestApi.UserMetaServiceApi(_pydioHttpApi2.default.getRestClient()),request=new _pydioHttpRestApi.IdmUpdateUserMetaRequest;if(isBookmarked){var searchRequest=new _pydioHttpRestApi.IdmSearchUserMetaRequest;searchRequest.NodeUuids=[nodeUuid],searchRequest.Namespace="bookmark",api.searchUserMeta(searchRequest).then(function(res){res.Metadatas&&res.Metadatas.length&&(request.Operation=_pydioHttpRestApi.UpdateUserMetaRequestUserMetaOp.constructFromObject("DELETE"),request.MetaDatas=res.Metadatas,api.updateUserMeta(request).then(function(){selection.requireNodeReload(node)}))})}else{request.Operation=_pydioHttpRestApi.UpdateUserMetaRequestUserMetaOp.constructFromObject("PUT");var userMeta=new _pydioHttpRestApi.IdmUserMeta;userMeta.NodeUuid=nodeUuid,userMeta.Namespace="bookmark",userMeta.JsonValue='"true"',userMeta.Policies=[_pydioHttpRestApi.ServiceResourcePolicy.constructFromObject({Resource:nodeUuid,Action:"OWNER",Subject:"user:"+userId,Effect:"allow"}),_pydioHttpRestApi.ServiceResourcePolicy.constructFromObject({Resource:nodeUuid,Action:"READ",Subject:"user:"+userId,Effect:"allow"}),_pydioHttpRestApi.ServiceResourcePolicy.constructFromObject({Resource:nodeUuid,Action:"WRITE",Subject:"user:"+userId,Effect:"allow"})],request.MetaDatas=[userMeta],api.updateUserMeta(request).then(function(){selection.requireNodeReload(node)})}}},module.exports=exports.default},{"../globals":11,"pydio/http/api":"pydio/http/api","pydio/http/rest-api":"pydio/http/rest-api"}],8:[function(require,module,exports){"use strict";exports.__esModule=!0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _react=require("react"),_materialUi=require("material-ui"),_require$requireLib=require("pydio").requireLib("boot"),PydioContextConsumer=_require$requireLib.PydioContextConsumer,AboutCellsCard=function(_Component){_inherits(AboutCellsCard,_Component);function AboutCellsCard(){_classCallCheck(this,AboutCellsCard),_Component.apply(this,arguments)}return AboutCellsCard.prototype.openDocs=function(){open("https://github.com/pydio/cells/wiki")},AboutCellsCard.prototype.openForum=function(){open("https://forum.pydio.com")},AboutCellsCard.prototype.openGithub=function(){open("https://github.com/pydio/cells/issues")},AboutCellsCard.prototype.render=function(){var _props=this.props,pydio=_props.pydio,style=_props.style;pydio.Parameters.get("ajxpResourcesFolder");return React.createElement(_materialUi.Card,{style:style},React.createElement(_materialUi.CardTitle,{title:"About Pydio Cells",subtitle:"Future-proof file-sharing platform"}),React.createElement(_materialUi.CardText,null,"Pydio Cells is a full rewrite of the PHP server into #Go, the server language used by Google on their own datacenters all over the world. It is designed with scalability and open standards in mind, and based on a micro-services architecture. Please refer to the dedicated documentation to read more about this new architecture and how you can help testing it.",React.createElement("br",null),"Contributions and bug reports are welcome on our Github repository. Please make sure to read the Contributing instructions and to give as much details as possible to provide a reproducible scenario!"),React.createElement(_materialUi.Divider,null),React.createElement(_materialUi.CardActions,null,React.createElement(_materialUi.FlatButton,{primary:!0,icon:React.createElement(_materialUi.FontIcon,{className:"mdi mdi-book-variant"}),label:"Docs",onTouchTap:this.openDocs}),React.createElement(_materialUi.FlatButton,{primary:!0,icon:React.createElement(_materialUi.FontIcon,{className:"mdi mdi-slack"}),label:"Forums",onTouchTap:this.openForum}),React.createElement(_materialUi.FlatButton,{primary:!0,icon:React.createElement(_materialUi.FontIcon,{className:"mdi mdi-github-box"}),label:"Issues",onTouchTap:this.openGithub})))},AboutCellsCard}(_react.Component);exports.default=AboutCellsCard=PydioContextConsumer(AboutCellsCard),exports.default=AboutCellsCard,module.exports=exports.default},{"material-ui":"material-ui",pydio:"pydio",react:"react"}],9:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals"),_materialUi=require("material-ui"),React=require("react"),BootUI=(require("pydio/http/api"),require("pydio/http/resources-manager").requireLib("boot")),ActionDialogMixin=BootUI.ActionDialogMixin,AsyncComponent=(BootUI.SubmitButtonProviderMixin,BootUI.CancelButtonProviderMixin,BootUI.AsyncComponent),PasswordDialog=React.createClass({displayName:"PasswordDialog",mixins:[ActionDialogMixin],getInitialState:function(){return{passValid:!1}},getDefaultProps:function(){return{dialogTitle:_globals.pydio.MessageHash[194],dialogIsModal:!0,dialogSize:"sm"}},getButtons:function(){var _this=this,updater=arguments.length<=0||void 0===arguments[0]?null:arguments[0];updater&&(this._updater=updater);var buttons=[];return this.props.locked||buttons.push(React.createElement(_materialUi.FlatButton,{label:this.props.pydio.MessageHash[49],onTouchTap:function(){return _this.dismiss()}})),buttons.push(React.createElement(_materialUi.FlatButton,{label:this.props.pydio.MessageHash[48],onTouchTap:this.submit.bind(this),disabled:!this.state.passValid})),buttons},submit:function(){if(!this.state.passValid)return!1;this.refs.passwordForm.instance.post(function(value){value&&this.dismiss()}.bind(this))},passValidStatusChange:function(status){var _this2=this;this.setState({passValid:status},function(){_this2._updater(_this2.getButtons())})},render:function(){return React.createElement(AsyncComponent,{namespace:"UserAccount",componentName:"PasswordForm",pydio:this.props.pydio,ref:"passwordForm",onValidStatusChange:this.passValidStatusChange})}});exports.default=PasswordDialog,module.exports=exports.default},{"../globals":11,"material-ui":"material-ui","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],10:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _AboutCellsCard=require("./AboutCellsCard"),_materialUi=(_interopRequireDefault(_AboutCellsCard),require("material-ui")),React=require("react"),PydioApi=require("pydio/http/api"),BootUI=require("pydio/http/resources-manager").requireLib("boot"),ActionDialogMixin=BootUI.ActionDialogMixin,SubmitButtonProviderMixin=BootUI.SubmitButtonProviderMixin,Loader=BootUI.Loader,SplashDialog=React.createClass({displayName:"SplashDialog",mixins:[ActionDialogMixin,SubmitButtonProviderMixin],getDefaultProps:function(){return{dialogTitle:"",dialogSize:"lg",dialogIsModal:!1,dialogPadding:!1,dialogScrollBody:!0}},submit:function(){this.dismiss()},openDocs:function(){open("https://pydio.com/en/docs")},openForum:function(){open("https://forum.pydio.com")},openGithub:function(){open("https://github.com/pydio/cells/issues")},getInitialState:function(){return{aboutContent:null}},componentDidMount:function(){PydioApi.getClient().request({get_action:"display_doc",doc_file:"CREDITS"},function(transport){this.setState({aboutContent:transport.responseText})}.bind(this))},render:function(){var _this=this,credit=void 0;if(this.state.aboutContent){var ct=function(){return{__html:_this.state.aboutContent}};credit=React.createElement("div",{dangerouslySetInnerHTML:ct()})}else credit=React.createElement(Loader,{style:{minHeight:200}});return credit=React.createElement(_materialUi.Card,{style:{margin:10}},React.createElement(_materialUi.CardTitle,{title:pydio.Parameters.get("backend").PackageLabel,subtitle:"Details about version, licensing and how to get help"}),React.createElement(_materialUi.Divider,null),React.createElement(_materialUi.CardActions,null,React.createElement(_materialUi.FlatButton,{primary:!0,icon:React.createElement(_materialUi.FontIcon,{className:"mdi mdi-book-variant"}),label:"Docs",onTouchTap:this.openDocs}),React.createElement(_materialUi.FlatButton,{primary:!0,icon:React.createElement(_materialUi.FontIcon,{className:"mdi mdi-slack"}),label:"Forums",onTouchTap:this.openForum}),React.createElement(_materialUi.FlatButton,{primary:!0,icon:React.createElement(_materialUi.FontIcon,{className:"mdi mdi-github-box"}),label:"Issues",onTouchTap:this.openGithub})),React.createElement(_materialUi.Divider,null),React.createElement(_materialUi.CardText,null,credit)),React.createElement("div",{style:{height:"100%",backgroundColor:"#CFD8DC"}},credit)}});exports.default=SplashDialog,module.exports=exports.default},{"./AboutCellsCard":8,"material-ui":"material-ui","pydio/http/api":"pydio/http/api","pydio/http/resources-manager":"pydio/http/resources-manager",react:"react"}],11:[function(require,module,exports){"use strict";exports.__esModule=!0;var global=window,pydio=global.pydio,MessageHash=pydio.MessageHash;exports.global=global,exports.pydio=pydio,exports.MessageHash=MessageHash},{}],12:[function(require,module,exports){"use strict";exports.__esModule=!0;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _dialogSplashDialog=require("./dialog/SplashDialog"),_dialogSplashDialog2=_interopRequireDefault(_dialogSplashDialog),_dialogPasswordDialog=require("./dialog/PasswordDialog"),_dialogPasswordDialog2=_interopRequireDefault(_dialogPasswordDialog),Callbacks={switchLanguage:require("./callbacks/switchLanguage"),changePass:require("./callbacks/changePass"),launchIndexation:require("./callbacks/launchIndexation"),toggleBookmark:require("./callbacks/toggleBookmark"),clearPluginsCache:require("./callbacks/clearPluginsCache"),dismissUserAlert:require("./callbacks/dismissUserAlert"),activateDesktopNotifications:require("./callbacks/activateDesktopNotifications")},Navigation={splash:require("./navigation/splash"),up:require("./navigation/up"),refresh:require("./navigation/refresh"),externalSelection:require("./navigation/externalSelection"),openGoPro:require("./navigation/openGoPro"),switchToSettings:require("./navigation/switchToSettings")};exports.Callbacks=Callbacks,exports.Navigation=Navigation,exports.SplashDialog=_dialogSplashDialog2.default,exports.PasswordDialog=_dialogPasswordDialog2.default},{"./callbacks/activateDesktopNotifications":1,"./callbacks/changePass":2,"./callbacks/clearPluginsCache":3,"./callbacks/dismissUserAlert":4,"./callbacks/launchIndexation":5,"./callbacks/switchLanguage":6,"./callbacks/toggleBookmark":7,"./dialog/PasswordDialog":9,"./dialog/SplashDialog":10,"./navigation/externalSelection":13,"./navigation/openGoPro":14,"./navigation/refresh":15,"./navigation/splash":16,"./navigation/switchToSettings":17,"./navigation/up":18}],13:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){var userSelection=_globals.pydio.getUserSelection();if(userSelection.isUnique()&&!userSelection.hasDir()){var fileName=userSelection.getUniqueFileName(),selectorData=_globals.pydio.getController().selectorData;if("ckeditor"==selectorData.get("type")){var ckData=selectorData.get("data");if(ckData.CKEditorFuncNum){var imagePath=fileName;ckData.relative_path&&(imagePath=ckData.relative_path+fileName),_globals.global.opener.CKEDITOR.tools.callFunction(ckData.CKEditorFuncNum,imagePath),_globals.global.close()}}}},module.exports=exports.default},{"../globals":11}],14:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.global.open("https://pydio.com/en/go-pro?referrer=settings")},module.exports=exports.default},{"../globals":11}],15:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.fireContextRefresh()},module.exports=exports.default},{"../globals":11}],16:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.UI.openComponentInModal("PydioCoreActions","SplashDialog")},module.exports=exports.default},{"../globals":11}],17:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.repositoryId&&"settings"==_globals.pydio.repositoryId||_globals.pydio.triggerRepositoryChange("settings")},module.exports=exports.default},{"../globals":11}],18:[function(require,module,exports){"use strict";exports.__esModule=!0;var _globals=require("../globals");exports.default=function(){_globals.pydio.fireContextUp()},module.exports=exports.default},{"../globals":11}]},{},[12])(12)});